
    <html>
    <head>
      <script type="text/javascript" src="VIS/dist/vis.js"></script>
      <link href="VIS/dist/vis.css" rel="stylesheet" type="text/css">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>

    <div id="VIS_draw"></div>

    <script type="text/javascript">
      var network;
      var allNodes;
      var highlightActive = false;
    
      var nodesDataset = new vis.DataSet([{'group': 'Event', 'id': 137, 'label': '卢某'}, {'group': 'Event', 'id': 19, 'label': '关键词'}, {'group': 'Event', 'id': 48, 'label': '警方'}, {'group': 'Event', 'id': 128, 'label': '翁某'}, {'group': 'Event', 'id': 136, 'label': '力天佑'}, {'group': 'Event', 'id': 132, 'label': '胡某'}, {'group': 'Event', 'id': 121, 'label': '耿某'}, {'group': 'Event', 'id': 54, 'label': '出租屋'}, {'group': 'Event', 'id': 14, 'label': '找到'}, {'group': 'Event', 'id': 56, 'label': '屋内'}, {'group': 'Event', 'id': 23, 'label': '报警'}, {'group': 'Event', 'id': 21, 'label': '接到报警'}, {'group': 'Event', 'id': 22, 'label': '群众'}, {'group': 'Event', 'id': 25, 'label': '失踪'}, {'group': 'Event', 'id': 27, 'label': '死亡'}, {'group': 'Event', 'id': 29, 'label': '涉嫌参与'}, {'group': 'Event', 'id': 31, 'label': '抓获归案'}, {'group': 'Event', 'id': 33, 'label': '有钱'}, {'group': 'Event', 'id': 35, 'label': '带耿某'}, {'group': 'Event', 'id': 37, 'label': '带卢某'}, {'group': 'Event', 'id': 39, 'label': '搜手机'}, {'group': 'Event', 'id': 41, 'label': '抓获'}, {'group': 'Event', 'id': 61, 'label': '高频词'}, {'group': 'Event', 'id': 58, 'label': '嫌疑人'}, {'group': 'Event', 'id': 60, 'label': '进入'}, {'group': 'Event', 'id': 71, 'label': '人物'}, {'group': 'Event', 'id': 72, 'label': '广州'}, {'group': 'Event', 'id': 81, 'label': '地名'}, {'group': 'Event', 'id': 74, 'label': '广州番禺'}, {'group': 'Event', 'id': 109, 'label': '番禺区'}, {'group': 'Event', 'id': 107, 'label': '桥街'}, {'group': 'Event', 'id': 133, 'label': '番禺'}]); 
      var edgesDataset = new vis.DataSet([{'from': 137, 'label': '', 'to': 19}, {'from': 48, 'label': '', 'to': 19}, {'from': 128, 'label': '', 'to': 19}, {'from': 136, 'label': '', 'to': 19}, {'from': 132, 'label': '', 'to': 19}, {'from': 121, 'label': '', 'to': 19}, {'from': 54, 'label': '', 'to': 19}, {'from': 14, 'label': '', 'to': 19}, {'from': 56, 'label': '', 'to': 19}, {'from': 23, 'label': '', 'to': 19}, {'from': 48, 'label': '', 'to': 21}, {'from': 22, 'label': '', 'to': 23}, {'from': 137, 'label': '', 'to': 25}, {'from': 137, 'label': '', 'to': 27}, {'from': 48, 'label': '', 'to': 29}, {'from': 121, 'label': '', 'to': 31}, {'from': 137, 'label': '', 'to': 33}, {'from': 136, 'label': '', 'to': 35}, {'from': 128, 'label': '', 'to': 37}, {'from': 136, 'label': '', 'to': 39}, {'from': 48, 'label': '', 'to': 41}, {'from': 137, 'label': '', 'to': 61}, {'from': 128, 'label': '', 'to': 61}, {'from': 136, 'label': '', 'to': 61}, {'from': 48, 'label': '', 'to': 61}, {'from': 121, 'label': '', 'to': 61}, {'from': 132, 'label': '', 'to': 61}, {'from': 54, 'label': '', 'to': 61}, {'from': 56, 'label': '', 'to': 61}, {'from': 58, 'label': '', 'to': 61}, {'from': 60, 'label': '', 'to': 61}, {'from': 137, 'label': '', 'to': 71}, {'from': 121, 'label': '', 'to': 71}, {'from': 132, 'label': '', 'to': 71}, {'from': 128, 'label': '', 'to': 71}, {'from': 136, 'label': '', 'to': 71}, {'from': 72, 'label': '', 'to': 81}, {'from': 74, 'label': '', 'to': 81}, {'from': 109, 'label': '', 'to': 81}, {'from': 107, 'label': '', 'to': 81}, {'from': 133, 'label': '', 'to': 81}, {'from': 121, 'label': '', 'to': 132}, {'from': 132, 'label': '', 'to': 121}, {'from': 121, 'label': '', 'to': 128}, {'from': 128, 'label': '', 'to': 121}, {'from': 128, 'label': '', 'to': 132}, {'from': 132, 'label': '', 'to': 128}, {'from': 137, 'label': '', 'to': 128}, {'from': 128, 'label': '', 'to': 137}, {'from': 107, 'label': '', 'to': 109}, {'from': 107, 'label': '', 'to': 137}, {'from': 109, 'label': '', 'to': 107}, {'from': 109, 'label': '', 'to': 137}, {'from': 137, 'label': '', 'to': 107}, {'from': 137, 'label': '', 'to': 109}, {'from': 121, 'label': '', 'to': 137}, {'from': 121, 'label': '', 'to': 133}, {'from': 137, 'label': '', 'to': 121}, {'from': 137, 'label': '', 'to': 133}, {'from': 137, 'label': '', 'to': 132}, {'from': 133, 'label': '', 'to': 121}, {'from': 133, 'label': '', 'to': 137}, {'from': 133, 'label': '', 'to': 128}, {'from': 133, 'label': '', 'to': 132}, {'from': 128, 'label': '', 'to': 133}, {'from': 132, 'label': '', 'to': 137}, {'from': 132, 'label': '', 'to': 133}, {'from': 137, 'label': '', 'to': 136}, {'from': 136, 'label': '', 'to': 137}]); 

      var container = document.getElementById("VIS_draw");

      var data = {
        nodes: nodesDataset,
        edges: edgesDataset
      };
      var options = {
          nodes: {
            shape: 'circle',
            size: 15,
              font: {
                  size: 15
              }
          },
          edges: {
             font: {
                  size: 10,
                  align: 'center'
              },
              color: 'red',
              arrows: {
                  to: {enabled: true, scaleFactor: 1.2}
              },
              smooth: {enabled: true}
          },
          physics: true,
          interaction: {
            tooltipDelay: 200,
            //hideEdgesOnDrag: true,
            //hideEdgesOnZoom: true,
          }
      };
    
      network = new vis.Network(container, data, options);
      // get a JSON object
      allNodes = nodesDataset.get({returnType:"Object"});
      network.on("click",neighbourhoodHighlight);
      
      function neighbourhoodHighlight(params) {
            // if something is selected:
            if (params.nodes.length > 0) {
              highlightActive = true;
              var i,j;
              var selectedNode = params.nodes[0];
              var degrees = 2;

              // mark all nodes as hard to read.
              for (var nodeId in allNodes) {
                allNodes[nodeId].color = 'rgba(200,200,200,0.5)';
                if (allNodes[nodeId].hiddenLabel === undefined) {
                  allNodes[nodeId].hiddenLabel = allNodes[nodeId].label;
                  allNodes[nodeId].label = undefined;
                }
              }
              var connectedNodes = network.getConnectedNodes(selectedNode);
              var allConnectedNodes = [];

              // get the second degree nodes
              for (i = 1; i < degrees; i++) {
                for (j = 0; j < connectedNodes.length; j++) {
                  allConnectedNodes = allConnectedNodes.concat(network.getConnectedNodes(connectedNodes[j]));
                }
              }

              // all second degree nodes get a different color and their label back
              for (i = 0; i < allConnectedNodes.length; i++) {
                allNodes[allConnectedNodes[i]].color = 'rgba(150,150,150,0.75)';
                if (allNodes[allConnectedNodes[i]].hiddenLabel !== undefined) {
                  allNodes[allConnectedNodes[i]].label = allNodes[allConnectedNodes[i]].hiddenLabel;
                  allNodes[allConnectedNodes[i]].hiddenLabel = undefined;
                }
              }

              // all first degree nodes get their own color and their label back
              for (i = 0; i < connectedNodes.length; i++) {
                allNodes[connectedNodes[i]].color = undefined;
                if (allNodes[connectedNodes[i]].hiddenLabel !== undefined) {
                  allNodes[connectedNodes[i]].label = allNodes[connectedNodes[i]].hiddenLabel;
                  allNodes[connectedNodes[i]].hiddenLabel = undefined;
                }
              }

              // the main node gets its own color and its label back.
              allNodes[selectedNode].color = undefined;
              if (allNodes[selectedNode].hiddenLabel !== undefined) {
                allNodes[selectedNode].label = allNodes[selectedNode].hiddenLabel;
                allNodes[selectedNode].hiddenLabel = undefined;
              }
            }
            else if (highlightActive === true) {
              // reset all nodes
              for (var nodeId in allNodes) {
                allNodes[nodeId].color = undefined;
                if (allNodes[nodeId].hiddenLabel !== undefined) {
                  allNodes[nodeId].label = allNodes[nodeId].hiddenLabel;
                  allNodes[nodeId].hiddenLabel = undefined;
                }
              }
              highlightActive = false
            }

            // transform the object into an array
            var updateArray = [];
            for (nodeId in allNodes) {
              if (allNodes.hasOwnProperty(nodeId)) {
                updateArray.push(allNodes[nodeId]);
              }
            }
            nodesDataset.update(updateArray);
          }
    </script>
    </body>
    </html>
    